# S.M.A.R.T. ゲームレコメンデーションシステム

14個の感情ラベル（14因子）を5個の型に変換し、5個の主観感情との共通印象を比較し、キーログから5個の主観感情を推定し、5個の型から最も適合するゲームタイトルをレコメンドするGUIアプリケーションです。

## 機能

1. **14因子から5個の主観感情への変換**
   - 設定状況の魅力
   - ゲーム本来の楽しさ
   - 感覚運動的興奮
   - 和みと癒し
   - 難解・頭脳型

2. **14因子から5個の型への変換**
   - C1:ファンタジー型
   - C2:映画型
   - C3:現実活動型
   - C4:キャラクター型
   - C5:シミュレーション型

3. **キーログからの5個の主観感情の推定**
   - キーログデータから特徴量を抽出
   - HMMモデルを使用して感情を推定（オプション）
   - 14因子を推定し、5個の主観感情に変換

4. **共通印象の比較**
   - 5個の主観感情と5個の型の共通印象を比較
   - 各型と主観感情の組み合わせのスコアを計算

5. **ゲームレコメンデーション**
   - 5個の型から最も適合するゲームタイトルをレコメンド
   - 共通印象スコアを考慮したレコメンデーション

## ファイル構成

- `emotion_converter.py`: 14因子を5個の主観感情と5個の型に変換するモジュール
- `keylog_analyzer.py`: キーログから14因子を推定し、5個の主観感情を推定するモジュール
- `game_recommender.py`: 5個の型から最も適合するゲームタイトルをレコメンドするモジュール
- `smart_gui.py`: GUIアプリケーションのメインファイル

## 使用方法

### GUIアプリケーションの起動

```bash
python S.M.A.R.Tver/smart_gui.py
```

### 入力ファイル

1. **キーログCSV**（必須、14因子CSVと排他的）
   - キーログデータを含むCSVファイル
   - 列: `キー情報`, `持続時間(s)`, `遅延時間(s)`, `経過時間(s) (セッション開始からの時間)`

2. **14因子CSV**（オプション、キーログCSVと排他的）
   - 14因子の値を含むCSVファイル
   - 列: `game_title`（オプション）、14因子の列名

3. **HMMモデルファイル**（オプション）
   - HMMモデルのPKLファイル
   - キーログから感情を推定する際に使用

4. **ゲームスコアCSV**（推奨）
   - ゲームタイトルと14因子のスコアを含むCSVファイル
   - デフォルト: `syuyougametitle_score/merged_game_scores.csv`

### パラメータ設定

- **時間窓サイズ**: キーログの特徴量抽出時の時間窓のサイズ（秒）
- **レコメンド数**: レコメンドするゲームの数（Top N）

### 出力

- 結果はGUI上に表示されます
- オプションでCSVファイルに保存できます

## 依存関係

- Python 3.7+
- tkinter
- pandas
- numpy
- hmmlearn（オプション、HMMモデルを使用する場合）
- joblib（オプション、HMMモデルを使用する場合）

## 注意事項

- キーログから14因子を推定する機能は簡易的な実装です。より高精度な推定には、機械学習モデルの使用を推奨します。
- HMMモデルを使用する場合は、`hmmlearn`と`joblib`をインストールしてください。

