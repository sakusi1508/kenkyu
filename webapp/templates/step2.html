<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Step 2 - 評定スコア生成</title>
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; margin: 32px; }
      form { max-width: 560px; }
      label { display: block; margin-top: 12px; }
      input, select { width: 100%; padding: 8px; margin-top: 4px; }
      button { margin-top: 16px; padding: 10px 16px; }
      .msg { color: #b00; margin-bottom: 12px; }
    </style>
  </head>
  <body>
    <h1>Step 2 - 評定スコア生成</h1>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="msg">{{ messages[-1] }}</div>
      {% endif %}
    {% endwith %}
    <form method="post">
      <label>評定するレビューCSV
        <select name="reviews_csv" required>
          {% if preset_reviews_csv %}
            <option value="{{ preset_reviews_csv }}" selected>{{ preset_reviews_csv }}</option>
          {% endif %}
          {% for f in existing_reviews %}
            {% if f != preset_reviews_csv %}
              <option value="{{ f }}">{{ f }}</option>
            {% endif %}
          {% endfor %}
        </select>
      </label>
      <label>出力スコアCSV名（拡張子は自動で .csv）
        <input name="output_name" placeholder="例: my_scores" required />
      </label>
      <label>Word2Vec モデルパス
        <input name="model_path" value="{{ default_model_path }}" />
      </label>
      <button type="submit">評定スコアCSVを作成</button>
    </form>
  </body>
  </html>


